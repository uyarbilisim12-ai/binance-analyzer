<!DOCTYPE html>
<html lang="tr">
<head>
    <title>Binance Veri İzleyici</title>
    <style>
        body { background: #1e1e2e; color: #cdd6f4; font-family: sans-serif; }
        .log-container { max-width: 800px; margin: 20px auto; background: #313244; padding: 20px; border-radius: 10px; }
        .alarm-item { padding: 10px; border-bottom: 1px solid #45475a; display: flex; justify-content: space-between; }
    </style>
</head>
<body>
    <div class="log-container">
        <h1>Canlı Alarmlar</h1>
        <div id="alarms"></div>
    </div>

    <script>
        const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
        const ws = new WebSocket(`${protocol}//${window.location.host}`);
        const alarmDiv = document.getElementById('alarms');

        ws.onmessage = (event) => {
            const alarm = JSON.parse(event.data);
            const item = document.createElement('div');
            item.className = 'alarm-item';
            item.innerHTML = `
                <span><strong>${alarm.symbol}</strong>: ${alarm.text}</span>
                <span>${alarm.currentPrice} - ${alarm.timeText}</span>
            `;
            alarmDiv.prepend(item);
            
            // Tarayıcı bildirimi gönder
            if (Notification.permission === "granted") {
                new Notification(`${alarm.symbol} Alarmı`, { body: alarm.text });
            }
        };

        Notification.requestPermission();
    </script>
</body>
</html>
